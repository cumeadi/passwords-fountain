{"version":3,"sources":["webpack:///./src/common/components/button/button.component.tsx","webpack:///./src/modules/database/database.actions.ts","webpack:///./src/modules/passwordList/passwordList.actions.ts","webpack:///./src/common/components/button/button.styles.ts","webpack:///./src/common/utils/formValidators.ts","webpack:///./src/common/components/formControl/formControl.styles.ts","webpack:///./src/common/components/formControl/formControl.component.tsx","webpack:///./src/common/components/textInput/textInput.styles.ts","webpack:///./src/common/components/textInput/textInput.component.tsx","webpack:///./node_modules/formee/dist/formee.mjs","webpack:///./src/common/utils/form.ts","webpack:///./src/routes/passwordList/passwordList.styles.ts","webpack:///./src/modules/passwordList/components/optionsPanel/optionsPanel.styles.ts","webpack:///./src/modules/passwordList/components/optionsPanel/optionsPanelConnectCollapsed/optionsPanelConnectCollapsed.styles.ts","webpack:///./src/modules/passwordList/components/optionsPanel/optionsPanelConnectCollapsed/optionsPanelConnectCollapsed.component.tsx","webpack:///./src/modules/passwordList/components/optionsPanel/optionsPanelConnectExpanded/optionsPanelConnectExpanded.styles.ts","webpack:///./src/modules/passwordList/components/optionsPanel/optionsPanelConnectExpanded/optionsPanelConnectExpanded.component.tsx","webpack:///./src/modules/passwordList/components/optionsPanel/optionsPanelEntityFormCollapsed/optionsPanelEntityFormCollapsed.styles.ts","webpack:///./src/modules/passwordList/passwordList.selectors.ts","webpack:///./src/modules/passwordList/components/optionsPanel/optionsPanelEntityFormCollapsed/optionsPanelEntityFormCollapsed.component.tsx","webpack:///./src/modules/passwordList/components/optionsPanel/optionsPanelEntityFormExpanded/optionsPanelEntityFormExpanded.styles.ts","webpack:///./src/modules/passwordList/components/optionsPanel/optionsPanelEntityFormExpanded/optionsPanelEntityFormExpanded.component.tsx","webpack:///./src/modules/passwordList/components/optionsPanel/optionsPanel.component.tsx","webpack:///./src/modules/passwordList/components/passwordEntity/passwordEntity.styles.ts","webpack:///./src/common/components/iconButton/iconButton.styles.ts","webpack:///./src/common/components/iconButton/iconButton.component.tsx","webpack:///./src/modules/overlay/components/prompt/prompt.styles.ts","webpack:///./src/modules/overlay/components/prompt/prompt.component.tsx","webpack:///./src/modules/passwordList/components/passwordEntity/passwordEntity.component.tsx","webpack:///./src/routes/passwordList/passwordList.tsx"],"names":["Button","children","onClick","disabled","type","propTypes","PropTypes","bool","func","isRequired","any","defaultProps","merge","mergeState","databaseActions","async","appState","masterKey","adminKey","setupClient","encrypt","decrypt","decryptedAdminKey","selectAdminKey","client","secret","encryptedAdminKey","localStorage","setItem","adminKeyLocalStorageKeyName","err","callAction","overlayActions","hideGlobalLoader","showSnackbar","passwordListActions","switchOptionPanelVariant","optionPanelVariantName","currentOptionPanelVariantName","resetSelectedAndDecryptedEntity","selectedAndDecryptedEntity","setSelectedAndDecryptedEntity","entity","fetchPasswords","showGlobalLoader","fetchAllPasswordEntities","selectIsClientSet","selectClient","store","getState","passwords","optionsPanelVariantNames","entityFormCollapsed","addNewPassword","newEntityPayload","createPasswordEntity","encryptedPasswordEntity","login","password","label","value","editPassword","entityPayload","updatePasswordEntity","refId","removePassword","deletePasswordEntity","setPragma","h","Wrapper","styled","typography","text14","theme","spacing","s12","colors","primaryBlue","shadows","clickableItem","gray","media","gte","breakpoints","s375","stylelint","css","text16","m18","s480","text18","xl30","GridWrapper","white","val","length","LabelWrapper","fontFamilies","bold","darkBlue","xs6","InputWrapper","ErrorWrapper","red","FormControl","hasError","renderLabel","renderInput","renderError","oneOfType","string","standard","withError","TextInput","onInput","placeholder","name","serialize","form","j","key","tmp","i","out","rgx1","rgx2","elements","test","options","selected","push","checked","concat","validate","rules","toCheck","nxt","arr","k","msg","len","isOkay","data","trim","call","isValid","validateInputField","fieldName","formRef","formValidation","valueSetter","errorSetter","event","errors","current","target","useInputFormControl","defaultValue","setValue","useState","setErrors","Boolean","PasswordEntityWrapper","OptionsPanelWrapper","Placeholder","PlaceholderTextWrapper","text20","l24","text24","IconSizer","currentVariantName","connectCollapsed","pastelGreen","connectExpanded","entityFormExpanded","significantGreen","zIndexes","xs","ContentWrapper","Content","ButtonWrapper","OptionsPanelConnectCollapsed","switchCurrentVariantName","route","OptionsPanelConnectExpanded","useSelector","useAction","useRef","undefined","masterKeyInputState","masterKeyInputProps","ref","selectPasswordList","state","passwordList","selectPasswords","Date","now","createSelector","passwordListState","selectCurrentOptionPanelVariantName","selectSelectedAndDecryptedEntity","selectIsInEditMode","Object","keys","OptionsPanelEntityFormCollapsed","actionLabel","FormControlWrapper","OptionsPanelEntityFormExpanded","editedEntity","isInEditMode","useInputForm","labelInputState","labelInputProps","loginInputState","loginInputProps","passwordInputState","passwordInputProps","OptionsPanel","setCurrentVariantName","CurrentVariant","Row","selectedOutline","xxs2","isSelected","Label","Value","DataWrapper","ControlsWrapper","IconButton","iconName","width","height","number","m","Prompt","renderContent","renderControls","e","stopPropagation","promptTypes","PasswordEntity","promptType","setPromptType","id","passwordVisibility","resetPromptState","handlePromptConfirm","handleDecryptionPromptConfirm","handleRemovalPromptConfirm","handleControlClick","nextPromptType","handleFilledEyeClick","renderPrompt","renderIfTrue","confirmBtnLabel","placeholderEntityValue","useFirstTimeRedirection","useEffect","selectIsFirstTimeOnDevice","window","prerendering","setTimeout","PasswordList","isClientSet","shouldRenderPlaceholder","switchOptionsPanelVariant","selectedEntity","setSelectedEntity","renderPlaceholder","text","map"],"mappings":"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","file":"5.bundle.js","sourcesContent":["import { h, VNode } from 'preact';\nimport { TypedComponent } from '@/common/typings/prop-types';\nimport PropTypes from 'prop-types';\nimport { Wrapper, GridWrapper } from './button.styles';\n\nexport const Button: TypedComponent<Props> = ({\n    children,\n    onClick,\n    disabled,\n}: Props) => {\n    return (\n        <Wrapper type=\"button\" onClick={onClick} disabled={disabled}>\n            <GridWrapper>{children}</GridWrapper>\n        </Wrapper>\n    );\n};\n\ninterface Props {\n    disabled?: boolean;\n    onClick: Function;\n    children: string | VNode;\n}\n\nButton.propTypes = {\n    disabled: PropTypes.bool,\n    onClick: PropTypes.func.isRequired,\n    children: PropTypes.any.isRequired,\n};\n\nButton.defaultProps = {\n    disabled: false,\n};\n","import { AppState } from '@/store';\nimport { callAction, mergeState } from '@/common/utils/store';\nimport { adminKeyLocalStorageKeyName } from './database.constants';\nimport { Client } from 'faunadb';\nimport { selectAdminKey } from '@/modules/database/database.selectors';\nimport { DatabaseState } from '@/modules/database/database.state';\nimport { overlayActions } from '@/modules/overlay/overlay.actions';\n\nconst merge = mergeState<DatabaseState>('database');\n\nexport const databaseActions = {\n    setClient: async (\n        appState: AppState,\n        masterKey: string,\n        adminKey: string\n    ): Promise<Partial<AppState>> => {\n        const { setupClient } = await import('./database.service');\n        const { encrypt, decrypt } = await import(\n            '@/modules/cipher/cipher.service'\n        );\n\n        try {\n            const decryptedAdminKey =\n                adminKey === selectAdminKey()\n                    ? (decrypt(adminKey, masterKey) as string)\n                    : adminKey;\n\n            const client: Client = await setupClient({\n                secret: decryptedAdminKey,\n            });\n\n            const encryptedAdminKey = encrypt(decryptedAdminKey, masterKey);\n            localStorage.setItem(\n                adminKeyLocalStorageKeyName,\n                encryptedAdminKey\n            );\n            return merge({ client });\n        } catch (err) {\n            callAction(overlayActions.hideGlobalLoader);\n            callAction(\n                overlayActions.showSnackbar,\n                'snackbar.couldNotConnectToDB',\n                'error'\n            );\n            return merge({});\n        }\n    },\n};\n","import { AppState, store } from '@/store';\nimport { Client } from 'faunadb';\nimport { callAction, mergeState } from '@/common/utils/store';\nimport { databaseActions } from '@/modules/database/database.actions';\nimport {\n    selectIsClientSet,\n    selectClient,\n} from '@/modules/database/database.selectors';\nimport {\n    OptionsPanelVariantName,\n    optionsPanelVariantNames,\n    PasswordEntityPayload,\n    PasswordEntityPayloadReferable,\n} from '@/modules/passwordList/passwordList.constants';\nimport { PasswordListState } from '@/modules/passwordList/passwordList.state';\nimport { overlayActions } from '@/modules/overlay/overlay.actions';\n\nconst merge = mergeState<PasswordListState>('passwordList');\n\nexport const passwordListActions = {\n    switchOptionPanelVariant: (\n        appState: AppState,\n        optionPanelVariantName: OptionsPanelVariantName\n    ): Partial<AppState> => {\n        return merge({\n            currentOptionPanelVariantName: optionPanelVariantName,\n        });\n    },\n    resetSelectedAndDecryptedEntity: (): Partial<AppState> => {\n        return merge({\n            selectedAndDecryptedEntity: {} as PasswordEntityPayloadReferable,\n        });\n    },\n    setSelectedAndDecryptedEntity: (\n        appState: AppState,\n        entity: PasswordEntityPayloadReferable\n    ): Partial<AppState> => {\n        return merge({\n            selectedAndDecryptedEntity: entity,\n        });\n    },\n    fetchPasswords: async (\n        appState: AppState,\n        masterKey: string,\n        adminKey: string\n    ): Promise<Partial<AppState>> => {\n        callAction(overlayActions.showGlobalLoader);\n        const { fetchAllPasswordEntities } = await import(\n            '@/modules/database/database.service'\n        );\n\n        if (!selectIsClientSet(appState)) {\n            await callAction(databaseActions.setClient, masterKey, adminKey);\n        }\n\n        const client = selectClient(store.getState()) as Client;\n\n        try {\n            const passwords = await fetchAllPasswordEntities(client);\n            callAction(overlayActions.hideGlobalLoader);\n            callAction(\n                overlayActions.showSnackbar,\n                'snackbar.passwordsFetchedSuccessfully',\n                'success'\n            );\n            callAction(\n                passwordListActions.switchOptionPanelVariant,\n                optionsPanelVariantNames.entityFormCollapsed\n            );\n\n            return merge({ passwords });\n        } catch (err) {\n            callAction(overlayActions.hideGlobalLoader);\n            callAction(\n                overlayActions.showSnackbar,\n                'snackbar.couldNotFetchPasswords',\n                'error'\n            );\n            return merge({});\n        }\n    },\n    addNewPassword: async (\n        appState: AppState,\n        newEntityPayload: PasswordEntityPayload,\n        masterKey: string\n    ): Promise<Partial<AppState>> => {\n        callAction(overlayActions.showGlobalLoader);\n        const { createPasswordEntity } = await import(\n            '@/modules/database/database.service'\n        );\n        const { encrypt } = await import('@/modules/cipher/cipher.service');\n\n        const client = selectClient(store.getState()) as Client;\n\n        try {\n            const encryptedPasswordEntity = encrypt(\n                {\n                    login: newEntityPayload.login,\n                    password: newEntityPayload.password,\n                },\n                masterKey,\n                true\n            );\n            await createPasswordEntity(client, {\n                label: newEntityPayload.label,\n                value: encryptedPasswordEntity,\n            });\n            callAction(overlayActions.hideGlobalLoader);\n            callAction(\n                passwordListActions.switchOptionPanelVariant,\n                optionsPanelVariantNames.entityFormCollapsed\n            );\n        } catch (err) {\n            callAction(overlayActions.hideGlobalLoader);\n            callAction(\n                overlayActions.showSnackbar,\n                'snackbar.couldNotCreateNewPassword',\n                'error'\n            );\n        } finally {\n            return merge({});\n        }\n    },\n    editPassword: async (\n        appState: AppState,\n        entityPayload: PasswordEntityPayloadReferable,\n        masterKey: string\n    ): Promise<Partial<AppState>> => {\n        callAction(overlayActions.showGlobalLoader);\n        const { updatePasswordEntity } = await import(\n            '@/modules/database/database.service'\n        );\n        const { encrypt } = await import('@/modules/cipher/cipher.service');\n\n        const client = selectClient(store.getState()) as Client;\n\n        try {\n            const encryptedPasswordEntity = encrypt(\n                {\n                    login: entityPayload.login,\n                    password: entityPayload.password,\n                },\n                masterKey,\n                true\n            );\n            await updatePasswordEntity(client, entityPayload.refId, {\n                label: entityPayload.label,\n                value: encryptedPasswordEntity,\n            });\n            callAction(overlayActions.hideGlobalLoader);\n            callAction(passwordListActions.resetSelectedAndDecryptedEntity);\n            callAction(\n                passwordListActions.switchOptionPanelVariant,\n                optionsPanelVariantNames.entityFormCollapsed\n            );\n        } catch (err) {\n            callAction(overlayActions.hideGlobalLoader);\n            callAction(\n                overlayActions.showSnackbar,\n                'snackbar.couldNotEditPassword',\n                'error'\n            );\n        } finally {\n            return merge({});\n        }\n    },\n    removePassword: async (\n        appState: AppState,\n        refId: string\n    ): Promise<Partial<AppState>> => {\n        callAction(overlayActions.showGlobalLoader);\n        const { deletePasswordEntity } = await import(\n            '@/modules/database/database.service'\n        );\n\n        const client = selectClient(store.getState()) as Client;\n\n        try {\n            await deletePasswordEntity(client, refId);\n            callAction(overlayActions.hideGlobalLoader);\n        } catch (err) {\n            callAction(overlayActions.hideGlobalLoader);\n            callAction(\n                overlayActions.showSnackbar,\n                'snackbar.couldNotRemovePassword',\n                'error'\n            );\n        } finally {\n            return merge({});\n        }\n    },\n};\n","import { h } from 'preact';\nimport { styled, setPragma } from 'goober';\nimport { theme, typography, media, stylelint } from '@/common/theme';\nsetPragma(h);\n\n// Due to bugs, (button shouldn't be displayed both grid & flex)\n// More: https://github.com/rachelandrew/gridbugs#10-some-html-elements-cant-be-grid-containers\n// https://github.com/philipwalton/flexbugs#flexbug-9\nexport const Wrapper = styled('button')`\n    ${typography.text14}\n    padding: ${theme.spacing.s12};\n    min-width: 100px;\n    max-width: 360px;\n    text-transform: uppercase;\n    background: ${theme.colors.primaryBlue};\n    box-shadow: ${theme.shadows.clickableItem};\n\n    &:focus {\n        border: none;\n        outline: none;\n    }\n\n    &:active {\n        box-shadow: none;\n    }\n\n    &:disabled {\n        box-shadow: none;\n        background: ${theme.colors.gray};\n    }\n\n    &:hover:enabled {\n        cursor: pointer;\n\n        * {\n            text-decoration: underline;\n        }\n    }\n\n    ${media.gte(theme.breakpoints.s375)(stylelint.css`\n        ${typography.text16}\n        padding: ${theme.spacing.s12} ${theme.spacing.m18};\n    `)}\n\n    ${media.gte(theme.breakpoints.s480)(stylelint.css`\n        ${typography.text18}\n        padding: ${theme.spacing.s12} ${theme.spacing.xl30};\n    `)}\n`;\n\nexport const GridWrapper = styled('span')`\n    display: grid;\n    place-items: center;\n    color: ${theme.colors.white};\n    white-space: nowrap;\n`;\n","export const masterKey = (val?: string) => {\n    return (val && val.length >= 8) || 'optionsPanel.masterKeyTooShort';\n};\n\nexport const label = (val?: string): boolean | string => {\n    return (val && val.length >= 3) || 'optionsPanel.labelTooShort';\n};\n\nexport const login = (val?: string): boolean | string => {\n    return (val && val.length >= 3) || 'optionsPanel.loginTooShort';\n};\n\nexport const password = (val?: string): boolean | string => {\n    return (val && val.length >= 3) || 'optionsPanel.passwordTooShort';\n};\n\nexport const adminKey = (val?: string): boolean | string => {\n    return (val && val.length >= 40) || 'settings.adminKeyTooShort';\n};\n","import { h } from 'preact';\nimport { styled, setPragma } from 'goober';\nimport { theme, typography } from '@/common/theme';\nsetPragma(h);\n\nexport const Wrapper = styled('section')`\n    display: grid;\n`;\n\nexport const LabelWrapper = styled('div')`\n    ${typography.text18}\n    font-family: ${theme.fontFamilies.bold};\n    color: ${theme.colors.darkBlue};\n    margin-bottom: ${theme.spacing.xs6};\n`;\n\nexport const InputWrapper = styled('div')`\n    margin-bottom: ${theme.spacing.xs6};\n`;\nexport const ErrorWrapper = styled('div')`\n    ${typography.text18}\n    color: ${theme.colors.red};\n`;\n","import { h } from 'preact';\nimport { TypedComponent } from '@/common/typings/prop-types';\nimport PropTypes from 'prop-types';\nimport {\n    Wrapper,\n    LabelWrapper,\n    InputWrapper,\n    ErrorWrapper,\n} from './formControl.styles';\n\nexport const FormControl: TypedComponent<Props> = ({\n    hasError,\n    renderLabel,\n    renderInput,\n    renderError,\n}: Props) => {\n    return (\n        <Wrapper>\n            <LabelWrapper>{renderLabel()}</LabelWrapper>\n            <InputWrapper>{renderInput()}</InputWrapper>\n            {hasError && <ErrorWrapper>{renderError()}</ErrorWrapper>}\n        </Wrapper>\n    );\n};\n\ninterface Props {\n    hasError: string | boolean;\n    renderInput: Function;\n    renderLabel: Function;\n    renderError: Function;\n}\n\nFormControl.propTypes = {\n    hasError: PropTypes.oneOfType([PropTypes.string, PropTypes.bool])\n        .isRequired,\n    renderLabel: PropTypes.func.isRequired,\n    renderInput: PropTypes.func.isRequired,\n    renderError: PropTypes.func.isRequired,\n};\n","import { h } from 'preact';\nimport { styled, setPragma } from 'goober';\nimport { theme, stylelint, typography } from '@/common/theme';\nsetPragma(h);\n\nconst standard = stylelint.css`\n    border: 1px solid ${theme.colors.primaryBlue};\n\n    &:focus {\n        box-shadow: 0 0 0 2px ${theme.colors.primaryBlue} inset;\n    }\n`;\n\nconst withError = stylelint.css`\n    border: 1px solid ${theme.colors.red};\n    color: ${theme.colors.red};\n\n    &:focus {\n        box-shadow: 0 0 0 2px ${theme.colors.red} inset;\n    }\n`;\n\nexport const Wrapper = styled('input')`\n    ${typography.text18}\n    padding: ${theme.spacing.s12};\n    width: 100%;\n    min-width: 240px;\n    color: ${theme.colors.darkBlue};\n    box-shadow: ${theme.shadows.clickableItem};\n    outline: none;\n\n    &:hover {\n        text-decoration: underline;\n    }\n\n    ${({ hasError }: { hasError: boolean }): string =>\n        hasError ? withError : standard}\n`;\n","import { h } from 'preact';\nimport { TypedComponent } from '@/common/typings/prop-types';\nimport PropTypes from 'prop-types';\nimport { Wrapper } from './textInput.styles';\n\nexport const TextInput: TypedComponent<Props> = ({\n    value,\n    onInput,\n    placeholder,\n    hasError,\n    name,\n    type,\n}: Props) => {\n    return (\n        <Wrapper\n            type={type}\n            value={value}\n            onInput={onInput}\n            placeholder={placeholder}\n            hasError={hasError}\n            name={name}\n        />\n    );\n};\n\ninterface Props {\n    onInput: Function;\n    value?: string;\n    placeholder?: string;\n    hasError?: boolean;\n    name?: string;\n    type?: string;\n}\n\nTextInput.propTypes = {\n    onInput: PropTypes.func.isRequired,\n    value: PropTypes.string,\n    placeholder: PropTypes.string,\n    hasError: PropTypes.bool,\n    name: PropTypes.string,\n    type: PropTypes.string,\n};\n\nTextInput.defaultProps = {\n    value: '',\n    placeholder: '',\n    hasError: false,\n    name: '',\n    type: 'text',\n};\n","export function serialize(form) {\n\tvar i=0, j, key, tmp, out={};\n\tvar rgx1 = /(radio|checkbox)/i;\n\tvar rgx2 = /(file|reset|submit|button)/i;\n\n\twhile (tmp = form.elements[i++]) {\n\t\t// Ignore unnamed, disabled, or (...rgx2) inputs\n\t\tif (!tmp.name || tmp.disabled || rgx2.test(tmp.type)) continue;\n\n\t\tkey = tmp.name;\n\n\t\t// Grab all values from multi-select\n\t\tif (tmp.type === 'select-multiple') {\n\t\t\tout[key] = [];\n\t\t\tfor (j=0; j < tmp.options.length; j++) {\n\t\t\t\tif (tmp.options[j].selected) {\n\t\t\t\t\tout[key].push(tmp.options[j].value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (rgx1.test(tmp.type)) {\n\t\t\tif (tmp.checked) {\n\t\t\t\tj = out[key];\n\t\t\t\ttmp = tmp.value === 'on' || tmp.value;\n\t\t\t\tout[key] = (j == null && j !== 0) ? tmp : [].concat(j, tmp);\n\t\t\t}\n\t\t} else if (tmp.value || tmp.value === 0) {\n\t\t\tj = out[key];\n\t\t\tout[key] = (j == null && j !== 0) ? tmp.value : [].concat(j, tmp.value);\n\t\t}\n\t}\n\n\treturn out;\n}\n\nexport function validate(form, rules, toCheck) {\n\trules = rules || {};\n\tvar nxt, arr, isOkay=true, out={};\n\tvar k, msg, len, data=serialize(form);\n\n\tif (toCheck && toCheck.trim) {\n\t\tnxt = {};\n\t\tnxt[toCheck] = rules[toCheck];\n\t\trules = nxt;\n\t}\n\n\tfor (k in rules) {\n\t\t// Accomodate Function or RegExp\n\t\tmsg = (rules[k].test || rules[k]).call(rules[k], data[k], data);\n\t\t// Accomodate radio|checkbox groups\n\t\tnxt = form.elements[k];\n\t\tarr = nxt.length ? nxt : [nxt];\n\t\tfor (len=arr.length; len--;) {\n\t\t\tarr[len].isValid = (msg === true) || (out[k]=msg,isOkay=false);\n\t\t}\n\t}\n\n\tform.isValid = isOkay;\n\n\treturn out;\n}\n\nexport function bind(form, opts) {\n\topts = opts || {};\n\n\tform.serialize = serialize.bind(null, form);\n\tform.validate = validate.bind(null, form, opts.rules);\n\n\tform.onsubmit = function (ev) {\n\t\tev.preventDefault();\n\t\tev.errors = form.errors = form.validate();\n\t\treturn form.isValid ? opts.onSubmit(ev) : opts.onError(ev);\n\t};\n\n\treturn form;\n}\n","import { RefObject } from 'preact';\nimport { useState } from 'preact/hooks';\nimport { validate } from 'formee';\n\ntype InputEventHandler = (event: Event) => void;\n\nexport const validateInputField = (\n    fieldName: string,\n    formRef: RefObject<HTMLFormElement>,\n    formValidation: { [key: string]: (val: string) => boolean | string },\n    valueSetter: (val: string) => void,\n    errorSetter: (errorMsg: string) => void\n): InputEventHandler => (event: Event): void => {\n    const errors: { [key: string]: any } = validate(\n        formRef.current as HTMLFormElement,\n        formValidation\n    );\n    const value = (event.target as HTMLInputElement).value;\n    const defaultValue = '';\n\n    valueSetter(value ?? defaultValue);\n    errorSetter(errors[fieldName] ?? defaultValue);\n};\n\nexport interface FormTextInputState {\n    value: string;\n    setValue: (value: string) => void;\n    errors: string;\n    setErrors: (value: string) => void;\n}\n\nexport interface FormTextInputProps {\n    name: string;\n    value: string;\n    hasError: boolean;\n    onInput: Function;\n}\n\nexport const useInputFormControl = (\n    formRef: RefObject<HTMLFormElement>,\n    formValidation: { [key: string]: (val: string) => boolean | string },\n    fieldName: string,\n    defaultValue = ''\n): [FormTextInputState, FormTextInputProps] => {\n    const [value, setValue] = useState(defaultValue);\n    const [errors, setErrors] = useState('');\n\n    return [\n        { value, setValue, errors, setErrors },\n        {\n            name: fieldName,\n            value,\n            hasError: Boolean(errors),\n            onInput: validateInputField(\n                fieldName,\n                formRef,\n                formValidation,\n                setValue,\n                setErrors\n            ),\n        },\n    ];\n};\n","import { h } from 'preact';\nimport { styled, setPragma } from 'goober';\nimport { media, stylelint, theme, typography } from '@/common/theme';\nsetPragma(h);\n\nexport const PasswordEntityWrapper = styled('div')`\n    margin-bottom: ${theme.spacing.s12};\n`;\n\nexport const Wrapper = styled('section')`\n    padding-top: 100px;\n\n    ${PasswordEntityWrapper}:last-of-type {\n        margin-bottom: 0;\n    }\n`;\n\nexport const OptionsPanelWrapper = styled('div')`\n    display: grid;\n    justify-items: center;\n    margin-bottom: ${theme.spacing.s12};\n`;\n\nexport const Placeholder = styled('div')`\n    display: grid;\n    place-items: center;\n    padding: 140px 0 0 0;\n\n    ${media.gte(theme.breakpoints.s480)(stylelint.css`\n        padding: 170px 0 0 0;\n    `)}\n`;\n\nexport const PlaceholderTextWrapper = styled('div')`\n    ${typography.text20}\n    text-align: center;\n    color: ${theme.colors.darkBlue};\n    padding: ${theme.spacing.l24} 0;\n\n    ${media.gte(theme.breakpoints.s480)(stylelint.css`\n        ${typography.text24}\n    `)}\n`;\n\nexport const IconSizer = styled('div')`\n    margin: 0 auto;\n\n    img {\n        width: 100px;\n        height: 100px;\n    }\n\n    ${media.gte(theme.breakpoints.s480)(stylelint.css`\n        img {\n            width: 200px;\n            height: 200px;\n        }\n    `)}\n`;\n","import { h } from 'preact';\nimport { styled, setPragma } from 'goober';\nimport { theme } from '@/common/theme';\nimport {\n    optionsPanelVariantNames,\n    OptionsPanelVariantName,\n} from '@/modules/passwordList/passwordList.constants';\nsetPragma(h);\n\nconst getBorderStyle = ({\n    currentVariantName,\n}: {\n    currentVariantName: OptionsPanelVariantName;\n}): string => {\n    switch (currentVariantName) {\n        case optionsPanelVariantNames.connectCollapsed:\n        case optionsPanelVariantNames.entityFormCollapsed:\n            return `border: 2px solid ${theme.colors.pastelGreen};`;\n        case optionsPanelVariantNames.connectExpanded:\n        case optionsPanelVariantNames.entityFormExpanded:\n            return `border: 2px solid ${theme.colors.significantGreen};`;\n    }\n\n    return `border: 2px solid ${theme.colors.pastelGreen};`;\n};\n\nexport const Wrapper = styled('section')`\n    ${getBorderStyle}\n    z-index: ${theme.zIndexes.xs};\n    position: absolute;\n    top: 76px;\n    left: 50%;\n    transform: translateX(-50%);\n    width: calc(100% - 36px);\n    max-width: ${theme.breakpoints.s480};\n    background: ${theme.colors.white};\n    padding: ${theme.spacing.m18};\n`;\n\nexport const ContentWrapper = styled('div')``;\n\nexport const Content = styled('div')`\n    padding-bottom: ${theme.spacing.m18};\n`;\n\nexport const ButtonWrapper = styled('div')`\n    display: grid;\n    grid-auto-flow: column;\n    grid-gap: ${theme.spacing.xl30};\n`;\n","import { h } from 'preact';\nimport { styled, setPragma } from 'goober';\nsetPragma(h);\n\nexport const Wrapper = styled('section')``;\n","import { h } from 'preact';\nimport { TypedComponent } from '@/common/typings/prop-types';\nimport { route } from 'preact-router';\nimport PropTypes from 'prop-types';\nimport { Wrapper } from './optionsPanelConnectCollapsed.styles';\nimport { ButtonWrapper } from '../optionsPanel.styles';\nimport { VariantProps } from '../optionsPanel.component';\nimport { optionsPanelVariantNames } from '@/modules/passwordList/passwordList.constants';\nimport { Button } from '@/common/components/button';\nimport { Text } from '@/modules/localisation/components/text';\n\nexport const OptionsPanelConnectCollapsed: TypedComponent<VariantProps> = ({\n    switchCurrentVariantName,\n}: VariantProps) => {\n    const handleSettingsClick = (): void => {\n        route('/settings');\n    };\n    const handleDecodeClick = (): void =>\n        switchCurrentVariantName(optionsPanelVariantNames.connectExpanded);\n\n    return (\n        <Wrapper>\n            <ButtonWrapper>\n                <Button onClick={handleSettingsClick}>\n                    <Text>optionsPanel.settings</Text>\n                </Button>\n                <Button onClick={handleDecodeClick}>\n                    <Text>optionsPanel.connect</Text>\n                </Button>\n            </ButtonWrapper>\n        </Wrapper>\n    );\n};\n\nOptionsPanelConnectCollapsed.propTypes = {\n    switchCurrentVariantName: PropTypes.func.isRequired,\n};\n","import { h } from 'preact';\nimport { styled, setPragma } from 'goober';\nsetPragma(h);\n\nexport const Wrapper = styled('section')``;\n","import { h, VNode } from 'preact';\nimport { TypedComponent } from '@/common/typings/prop-types';\nimport PropTypes from 'prop-types';\nimport { Wrapper } from './optionsPanelConnectExpanded.styles';\nimport { ButtonWrapper, Content, ContentWrapper } from '../optionsPanel.styles';\nimport { Button } from '@/common/components/button';\nimport { Text } from '@/modules/localisation/components/text';\nimport { VariantProps } from '../optionsPanel.component';\nimport { optionsPanelVariantNames } from '@/modules/passwordList/passwordList.constants';\nimport { FormControl } from '@/common/components/formControl';\nimport { TextInput } from '@/common/components/textInput';\nimport { useRef } from 'preact/hooks';\nimport { useAction, useSelector } from '@/store';\nimport { passwordListActions } from '@/modules/passwordList/passwordList.actions';\nimport { selectAdminKey } from '@/modules/database/database.selectors';\nimport { masterKey } from '@/common/utils/formValidators';\nimport { useInputFormControl } from '@/common/utils/form';\n\nconst formValidation = { masterKey } as const;\n\nexport const OptionsPanelConnectExpanded: TypedComponent<VariantProps> = ({\n    switchCurrentVariantName,\n}: VariantProps) => {\n    const encryptedAdminKey = useSelector(selectAdminKey);\n    const fetchPasswords = useAction(passwordListActions.fetchPasswords);\n    const formRef = useRef(undefined as any);\n    const [masterKeyInputState, masterKeyInputProps] = useInputFormControl(\n        formRef,\n        formValidation,\n        'masterKey'\n    );\n\n    const handleCancelClick = (): void =>\n        switchCurrentVariantName(optionsPanelVariantNames.connectCollapsed);\n\n    const handleConfirmClick = async (): Promise<void> => {\n        fetchPasswords(masterKeyInputState.value, encryptedAdminKey);\n    };\n\n    const renderInput = (): VNode => (\n        <TextInput\n            type=\"password\"\n            placeholder=\"e.g. MyStrongPassword1234\"\n            {...masterKeyInputProps}\n        />\n    );\n\n    const renderLabel = (): VNode => <Text>optionsPanel.enterMasterKey</Text>;\n    const renderError = (): VNode => <Text>{masterKeyInputState.errors}</Text>;\n    return (\n        <Wrapper>\n            <ContentWrapper>\n                <Content>\n                    <form ref={formRef}>\n                        <FormControl\n                            hasError={masterKeyInputProps.hasError}\n                            renderLabel={renderLabel}\n                            renderInput={renderInput}\n                            renderError={renderError}\n                        />\n                    </form>\n                </Content>\n            </ContentWrapper>\n            <ButtonWrapper>\n                <Button onClick={handleCancelClick}>\n                    <Text>optionsPanel.cancel</Text>\n                </Button>\n                <Button\n                    onClick={handleConfirmClick}\n                    disabled={!formRef.current?.isValid}\n                >\n                    <Text>optionsPanel.confirm</Text>\n                </Button>\n            </ButtonWrapper>\n        </Wrapper>\n    );\n};\n\nOptionsPanelConnectExpanded.propTypes = {\n    switchCurrentVariantName: PropTypes.func.isRequired,\n};\n","import { h } from 'preact';\nimport { styled, setPragma } from 'goober';\nsetPragma(h);\n\nexport const Wrapper = styled('section')``;\n","import { createSelector } from 'reselect';\nimport { AppState } from '@/store';\nimport { PasswordListState } from './passwordList.state';\nimport { PasswordEntityPayloadReferable } from '@/modules/passwordList/passwordList.constants';\n\nconst selectPasswordList = (state: AppState): PasswordListState =>\n    state.passwordList;\n\nconst mock = [\n    {\n        ref: { id: 'x1', value: { id: 'x1 ' } },\n        ts: Date.now(),\n        data: { label: 'Bank account', value: 'v1' },\n    },\n    {\n        ref: { id: 'x2', value: { id: 'x2 ' } },\n        ts: Date.now(),\n        data: { label: 'Origin', value: 'v2' },\n    },\n    {\n        ref: { id: 'x3', value: { id: 'x3 ' } },\n        ts: Date.now(),\n        data: { label: 'Steam', value: 'v3' },\n    },\n    {\n        ref: { id: 'x4', value: { id: 'x4' } },\n        ts: Date.now(),\n        data: { label: 'Xiaomi', value: 'v4' },\n    },\n];\n\nexport const selectPasswords = createSelector(\n    selectPasswordList,\n    (passwordListState: PasswordListState) => passwordListState.passwords\n);\n\nexport const selectCurrentOptionPanelVariantName = createSelector(\n    selectPasswordList,\n    (passwordListState: PasswordListState) =>\n        passwordListState.currentOptionPanelVariantName\n);\n\nexport const selectSelectedAndDecryptedEntity = createSelector(\n    selectPasswordList,\n    (passwordListState: PasswordListState) =>\n        passwordListState.selectedAndDecryptedEntity\n);\n\nexport const selectIsInEditMode = createSelector(\n    selectSelectedAndDecryptedEntity,\n    (selectedAndDecryptedEntity: PasswordEntityPayloadReferable) =>\n        Object.keys(selectedAndDecryptedEntity).length !== 0\n);\n\nexport const selectSelectedAndDecryptedEntityByRefId = (refId: string) =>\n    createSelector(\n        selectSelectedAndDecryptedEntity,\n        (selectedAndDecryptedEntity: PasswordEntityPayloadReferable) => {\n            if (selectedAndDecryptedEntity.refId === refId) {\n                return selectedAndDecryptedEntity;\n            }\n\n            return {} as PasswordEntityPayloadReferable;\n        }\n    );\n","import { h } from 'preact';\nimport { TypedComponent } from '@/common/typings/prop-types';\nimport PropTypes from 'prop-types';\nimport { Wrapper } from './optionsPanelEntityFormCollapsed.styles';\nimport { VariantProps } from '../optionsPanel.component';\nimport { optionsPanelVariantNames } from '@/modules/passwordList/passwordList.constants';\nimport { ButtonWrapper } from '../optionsPanel.styles';\nimport { Button } from '@/common/components/button';\nimport { Text } from '@/modules/localisation/components/text';\nimport { route } from 'preact-router';\nimport { useSelector } from '@preact-hooks/unistore';\nimport { selectIsInEditMode } from '@/modules/passwordList/passwordList.selectors';\n\nexport const OptionsPanelEntityFormCollapsed: TypedComponent<VariantProps> = ({\n    switchCurrentVariantName,\n}: VariantProps) => {\n    const isInEditMode = useSelector(selectIsInEditMode);\n    const actionLabel = isInEditMode\n        ? 'optionsPanel.edit'\n        : 'optionsPanel.addNew';\n\n    const handleSettingsClick = (): void => {\n        route('/settings');\n    };\n    const handleActionClick = (): void =>\n        switchCurrentVariantName(optionsPanelVariantNames.entityFormExpanded);\n\n    return (\n        <Wrapper>\n            <ButtonWrapper>\n                <Button onClick={handleSettingsClick}>\n                    <Text>optionsPanel.settings</Text>\n                </Button>\n                <Button onClick={handleActionClick}>\n                    <Text>{actionLabel}</Text>\n                </Button>\n            </ButtonWrapper>\n        </Wrapper>\n    );\n};\n\nOptionsPanelEntityFormCollapsed.propTypes = {\n    switchCurrentVariantName: PropTypes.func.isRequired,\n};\n","import { h } from 'preact';\nimport { styled, setPragma } from 'goober';\nimport { theme } from '@/common/theme';\nsetPragma(h);\n\nexport const Wrapper = styled('section')``;\n\nexport const FormControlWrapper = styled('div')`\n    padding-bottom: ${theme.spacing.m18};\n`;\n","import { h, VNode } from 'preact';\nimport { TypedComponent } from '@/common/typings/prop-types';\nimport PropTypes from 'prop-types';\nimport {\n    Wrapper,\n    FormControlWrapper,\n} from './optionsPanelEntityFormExpanded.styles';\nimport { VariantProps } from '../optionsPanel.component';\nimport { optionsPanelVariantNames } from '@/modules/passwordList/passwordList.constants';\nimport { FormControl } from '@/common/components/formControl';\nimport { ButtonWrapper, Content, ContentWrapper } from '../optionsPanel.styles';\nimport { Button } from '@/common/components/button';\nimport { Text } from '@/modules/localisation/components/text';\nimport { useRef } from 'preact/hooks';\nimport { useInputFormControl } from '@/common/utils/form';\nimport { TextInput } from '@/common/components/textInput';\nimport { useAction, useSelector } from '@/store';\nimport { passwordListActions } from '@/modules/passwordList/passwordList.actions';\nimport {\n    label,\n    login,\n    password,\n    masterKey,\n} from '@/common/utils/formValidators';\nimport {\n    selectSelectedAndDecryptedEntity,\n    selectIsInEditMode,\n} from '@/modules/passwordList/passwordList.selectors';\nimport { selectAdminKey } from '@/modules/database/database.selectors';\n\nconst formValidation = {\n    label,\n    login,\n    password,\n    masterKey,\n} as const;\n\nexport const OptionsPanelEntityFormExpanded: TypedComponent<VariantProps> = ({\n    switchCurrentVariantName,\n}: VariantProps) => {\n    const encryptedAdminKey = useSelector(selectAdminKey);\n    const formRef = useRef(undefined as any);\n    const addNewPassword = useAction(passwordListActions.addNewPassword);\n    const editPassword = useAction(passwordListActions.editPassword);\n    const fetchPasswords = useAction(passwordListActions.fetchPasswords);\n\n    const editedEntity = useSelector(selectSelectedAndDecryptedEntity);\n    const isInEditMode = useSelector(selectIsInEditMode);\n    const actionLabel = isInEditMode ? 'optionsPanel.edit' : 'optionsPanel.add';\n\n    const useInputForm = (fieldName: string, defaultValue?: string) =>\n        useInputFormControl(formRef, formValidation, fieldName, defaultValue);\n\n    const [labelInputState, labelInputProps] = useInputForm(\n        'label',\n        editedEntity.label\n    );\n    const [loginInputState, loginInputProps] = useInputForm(\n        'login',\n        editedEntity.login\n    );\n    const [passwordInputState, passwordInputProps] = useInputForm(\n        'password',\n        editedEntity.password\n    );\n    const [masterKeyInputState, masterKeyInputProps] = useInputForm(\n        'masterKey'\n    );\n\n    const handleCancelClick = (): void =>\n        switchCurrentVariantName(optionsPanelVariantNames.entityFormCollapsed);\n\n    const handleAction = async (): Promise<void> => {\n        if (isInEditMode) {\n            await editPassword(\n                {\n                    label: labelInputState.value,\n                    login: loginInputState.value,\n                    password: passwordInputState.value,\n                    refId: editedEntity.refId,\n                },\n                masterKeyInputState.value\n            );\n        } else {\n            await addNewPassword(\n                {\n                    label: labelInputState.value,\n                    login: loginInputState.value,\n                    password: passwordInputState.value,\n                },\n                masterKeyInputState.value\n            );\n        }\n        fetchPasswords(masterKeyInputState.value, encryptedAdminKey);\n    };\n\n    const renderLabel = (label: string) => (): VNode => <Text>{label}</Text>;\n    const renderError = (errors: string) => (): VNode => <Text>{errors}</Text>;\n    return (\n        <Wrapper>\n            <ContentWrapper>\n                <Content>\n                    <form ref={formRef}>\n                        <FormControlWrapper>\n                            <FormControl\n                                hasError={labelInputProps.hasError}\n                                renderLabel={renderLabel(\n                                    'optionsPanel.labelInputLabel'\n                                )}\n                                renderInput={(): VNode => (\n                                    <TextInput\n                                        placeholder=\"e.g. My Bank Account\"\n                                        {...labelInputProps}\n                                    />\n                                )}\n                                renderError={renderError(\n                                    labelInputState.errors\n                                )}\n                            />\n                        </FormControlWrapper>\n                        <FormControlWrapper>\n                            <FormControl\n                                hasError={loginInputProps.hasError}\n                                renderLabel={renderLabel(\n                                    'optionsPanel.loginInputLabel'\n                                )}\n                                renderInput={(): VNode => (\n                                    <TextInput\n                                        placeholder=\"e.g. yourmail@yourmail.com\"\n                                        {...loginInputProps}\n                                    />\n                                )}\n                                renderError={renderError(\n                                    loginInputState.errors\n                                )}\n                            />\n                        </FormControlWrapper>\n                        <FormControlWrapper>\n                            <FormControl\n                                hasError={passwordInputProps.hasError}\n                                renderLabel={renderLabel(\n                                    'optionsPanel.passwordInputLabel'\n                                )}\n                                renderInput={(): VNode => (\n                                    <TextInput\n                                        type=\"password\"\n                                        placeholder=\"e.g. myPassWord1234\"\n                                        {...passwordInputProps}\n                                    />\n                                )}\n                                renderError={renderError(\n                                    passwordInputState.errors\n                                )}\n                            />\n                        </FormControlWrapper>\n                        <FormControlWrapper>\n                            <FormControl\n                                hasError={masterKeyInputProps.hasError}\n                                renderLabel={renderLabel(\n                                    'optionsPanel.masterKey'\n                                )}\n                                renderInput={(): VNode => (\n                                    <TextInput\n                                        type=\"password\"\n                                        placeholder=\"e.g. MyStrongPassword1234\"\n                                        {...masterKeyInputProps}\n                                    />\n                                )}\n                                renderError={renderError(\n                                    masterKeyInputState.errors\n                                )}\n                            />\n                        </FormControlWrapper>\n                    </form>\n                </Content>\n            </ContentWrapper>\n            <ButtonWrapper>\n                <Button onClick={handleCancelClick}>\n                    <Text>optionsPanel.cancel</Text>\n                </Button>\n                <Button\n                    onClick={handleAction}\n                    disabled={!formRef.current?.isValid}\n                >\n                    <Text>{actionLabel}</Text>\n                </Button>\n            </ButtonWrapper>\n        </Wrapper>\n    );\n};\n\nOptionsPanelEntityFormExpanded.propTypes = {\n    switchCurrentVariantName: PropTypes.func.isRequired,\n};\n","import { h } from 'preact';\nimport { useSelector, useAction } from '@/store';\nimport { TypedComponent } from '@/common/typings/prop-types';\nimport { Wrapper } from './optionsPanel.styles';\nimport { OptionsPanelConnectCollapsed } from './optionsPanelConnectCollapsed';\nimport { OptionsPanelConnectExpanded } from './optionsPanelConnectExpanded';\nimport { OptionsPanelEntityFormCollapsed } from './optionsPanelEntityFormCollapsed';\nimport { OptionsPanelEntityFormExpanded } from './optionsPanelEntityFormExpanded';\nimport { selectCurrentOptionPanelVariantName } from '@/modules/passwordList/passwordList.selectors';\nimport { passwordListActions } from '@/modules/passwordList/passwordList.actions';\nimport { OptionsPanelVariantName } from '@/modules/passwordList/passwordList.constants';\n\ntype VariantSwitcher = (destination: OptionsPanelVariantName) => void;\n\nexport interface VariantProps {\n    switchCurrentVariantName: VariantSwitcher;\n}\n\ntype VariantInstances = {\n    [key in OptionsPanelVariantName]: TypedComponent<VariantProps>;\n};\n\nexport const OptionsPanel: TypedComponent<Props> = () => {\n    const currentVariantName = useSelector(selectCurrentOptionPanelVariantName);\n    const setCurrentVariantName = useAction(\n        passwordListActions.switchOptionPanelVariant\n    );\n\n    const variants: VariantInstances = {\n        connectCollapsed: OptionsPanelConnectCollapsed,\n        connectExpanded: OptionsPanelConnectExpanded,\n        entityFormCollapsed: OptionsPanelEntityFormCollapsed,\n        entityFormExpanded: OptionsPanelEntityFormExpanded,\n    };\n\n    const CurrentVariant =\n        variants[currentVariantName as OptionsPanelVariantName];\n    return (\n        <Wrapper currentVariantName={currentVariantName}>\n            <CurrentVariant switchCurrentVariantName={setCurrentVariantName} />\n        </Wrapper>\n    );\n};\n\ninterface Props {}\n\nOptionsPanel.propTypes = {};\n","import { h } from 'preact';\nimport { styled, setPragma } from 'goober';\nimport { stylelint, theme, typography } from '@/common/theme';\nsetPragma(h);\n\nexport const Row = styled('div')`\n    margin-bottom: ${theme.spacing.m18};\n`;\n\nconst selectedOutline = stylelint.css`\n    outline: ${theme.spacing.xxs2} solid ${theme.colors.significantGreen};\n`;\n\nexport const Wrapper = styled('button')`\n    width: 100%;\n    box-shadow: ${theme.shadows.clickableItem};\n    background: ${theme.colors.pastelGreen};\n    padding: ${theme.spacing.m18};\n    ${({ isSelected }: { isSelected: boolean }) =>\n        isSelected ? selectedOutline : 'outline: none;'}\n\n    ${Row}:last-of-type {\n        margin-bottom: 0;\n    }\n\n    &:hover {\n        cursor: pointer;\n\n        & > span {\n            text-decoration: underline;\n        }\n    }\n`;\n\nexport const GridWrapper = styled('span')`\n    display: grid;\n    grid-auto-flow: column;\n    justify-content: space-between;\n`;\n\nexport const Label = styled('span')`\n    font-family: ${theme.fontFamilies.bold};\n    color: ${theme.colors.darkBlue};\n    ${typography.text18}\n`;\n\nexport const Value = styled('strong')`\n    color: ${theme.colors.darkBlue};\n    word-break: break-all;\n    ${typography.text18}\n`;\n\nexport const DataWrapper = styled('div')`\n    display: grid;\n    text-align: left;\n`;\n\nexport const ControlsWrapper = styled('div')`\n    display: grid;\n    align-content: space-between;\n`;\n\nexport const FormControlWrapper = styled('div')`\n    text-align: left;\n`;\n","import { h } from 'preact';\nimport { styled, setPragma } from 'goober';\nimport { theme } from '@/common/theme';\nimport { Wrapper as Button } from '@/common/components/button/button.styles';\nsetPragma(h);\n\nexport const Wrapper = styled(Button)`\n    padding: ${theme.spacing.xs6};\n    min-width: initial;\n`;\n","import { h } from 'preact';\nimport { TypedComponent } from '@/common/typings/prop-types';\nimport PropTypes from 'prop-types';\nimport { Wrapper } from './iconButton.styles';\nimport { Icon } from '@/common/components/icon';\nimport { IconName } from '@/assets/icons';\nimport { GridWrapper } from '@/common/components/button/button.styles';\n\nexport const IconButton: TypedComponent<Props> = ({\n    iconName,\n    width,\n    height,\n    onClick,\n}: Props) => {\n    return (\n        <Wrapper onClick={onClick}>\n            <GridWrapper>\n                <Icon name={iconName} width={width} height={height} />\n            </GridWrapper>\n        </Wrapper>\n    );\n};\n\ninterface Props {\n    iconName: IconName;\n    onClick: Function;\n    width?: number;\n    height?: number;\n}\n\nIconButton.propTypes = {\n    iconName: PropTypes.any.isRequired,\n    onClick: PropTypes.func.isRequired,\n    width: PropTypes.number,\n    height: PropTypes.number,\n};\n\nIconButton.defaultProps = {\n    width: 30,\n    height: 30,\n};\n","import { h } from 'preact';\nimport { styled, setPragma } from 'goober';\nimport { theme, typography } from '@/common/theme';\nsetPragma(h);\n\nexport const Wrapper = styled('section')`\n    position: fixed;\n    z-index: ${theme.zIndexes.m};\n    top: 76px;\n    left: 50%;\n    transform: translateX(-50%);\n    display: grid;\n    width: 100%;\n    min-width: 320px;\n    max-width: 640px;\n    justify-items: center;\n    grid-auto-flow: row;\n    padding: ${theme.spacing.xl30} ${theme.spacing.m18};\n    border: 1px solid ${theme.colors.primaryBlue};\n    border-top: 4px solid ${theme.colors.primaryBlue};\n    background: ${theme.colors.white};\n`;\n\nexport const ContentWrapper = styled('div')`\n    ${typography.text18}\n    display: grid;\n    max-width: 480px;\n    width: 100%;\n    padding: 0 ${theme.spacing.xs6} ${theme.spacing.xs6};\n    margin-bottom: ${theme.spacing.m18};\n    text-align: center;\n`;\n\nexport const ControlsWrapper = styled('div')`\n    display: grid;\n    grid-gap: ${theme.spacing.xl30};\n    grid-auto-flow: column;\n`;\n","import { h, VNode } from 'preact';\nimport { TypedComponent } from '@/common/typings/prop-types';\nimport PropTypes from 'prop-types';\nimport { Wrapper, ContentWrapper, ControlsWrapper } from './prompt.styles';\n\nexport const Prompt: TypedComponent<Props> = ({\n    renderContent,\n    renderControls,\n}: Props) => {\n    return (\n        <Wrapper onClick={(e: Event) => e.stopPropagation()}>\n            <ContentWrapper>{renderContent()}</ContentWrapper>\n            <ControlsWrapper>{renderControls()}</ControlsWrapper>\n        </Wrapper>\n    );\n};\n\ninterface Props {\n    renderContent: () => VNode | string;\n    renderControls: () => VNode;\n}\n\nPrompt.propTypes = {\n    renderContent: PropTypes.func.isRequired,\n    renderControls: PropTypes.func.isRequired,\n};\n","import { h, Fragment } from 'preact';\nimport { TypedComponent } from '@/common/typings/prop-types';\nimport { valueof } from '@/common/typings/helpers';\nimport PropTypes from 'prop-types';\nimport {\n    Wrapper,\n    GridWrapper,\n    Row,\n    Label,\n    Value,\n    DataWrapper,\n    ControlsWrapper,\n    FormControlWrapper,\n} from './passwordEntity.styles';\nimport { Text } from '@/modules/localisation/components/text';\nimport {\n    placeholderEntityValue,\n    PasswordEntityVulnerablePayload,\n} from '@/modules/passwordList/passwordList.constants';\nimport { useRef, useState } from 'preact/hooks';\nimport { PasswordEntityRaw } from '@/modules/database/database.service';\nimport { IconButton } from '@/common/components/iconButton';\nimport { renderIfTrue } from '@/common/utils/rendering';\nimport { Prompt } from '@/modules/overlay/components/prompt';\nimport { useInputFormControl } from '@/common/utils/form';\nimport { masterKey } from '@/common/utils/formValidators';\nimport { FormControl } from '@/common/components/formControl';\nimport { TextInput } from '@/common/components/textInput';\nimport { Button } from '@/common/components/button';\nimport { useAction, useSelector } from '@/store';\nimport { passwordListActions } from '@/modules/passwordList/passwordList.actions';\nimport { selectSelectedAndDecryptedEntityByRefId } from '@/modules/passwordList/passwordList.selectors';\nimport { selectAdminKey } from '@/modules/database/database.selectors';\n\nconst formValidation = { masterKey } as const;\n\nconst promptTypes = {\n    invisible: '',\n    removal: 'removal',\n    decryption: 'decryption',\n} as const;\n\ntype PromptType = valueof<typeof promptTypes>;\n\nexport const PasswordEntity: TypedComponent<Props> = ({\n    data,\n    isSelected,\n    onClick,\n}: Props) => {\n    const formRef = useRef(undefined as any);\n    const [promptType, setPromptType] = useState<PromptType>(\n        promptTypes.invisible\n    );\n    const encryptedAdminKey = useSelector(selectAdminKey);\n    const selectedAndDecryptedEntity = useSelector(\n        selectSelectedAndDecryptedEntityByRefId(data.ref.id)\n    );\n    const passwordVisibility =\n        Object.keys(selectedAndDecryptedEntity).length !== 0;\n\n    const [masterKeyInputState, masterKeyInputProps] = useInputFormControl(\n        formRef,\n        formValidation,\n        'masterKey'\n    );\n\n    const removePassword = useAction(passwordListActions.removePassword);\n    const fetchPasswords = useAction(passwordListActions.fetchPasswords);\n\n    const setSelectedAndDecryptedEntity = useAction(\n        passwordListActions.setSelectedAndDecryptedEntity\n    );\n    const resetSelectedAndDecryptedEntity = useAction(\n        passwordListActions.resetSelectedAndDecryptedEntity\n    );\n\n    const resetPromptState = (): void => {\n        setPromptType(promptTypes.invisible);\n        masterKeyInputState.setValue('');\n        masterKeyInputState.setErrors('');\n    };\n\n    const handleClick = (): void => {\n        onClick(isSelected ? null : data);\n        resetSelectedAndDecryptedEntity();\n        resetPromptState();\n    };\n\n    const handleDecryptionPromptConfirm = async (): Promise<void> => {\n        const { decrypt } = await import('@/modules/cipher/cipher.service');\n        const { login, password } = decrypt(\n            data.data.value,\n            masterKeyInputState.value,\n            true\n        ) as PasswordEntityVulnerablePayload;\n\n        setSelectedAndDecryptedEntity({\n            refId: data.ref.id,\n            label: data.data.label,\n            login,\n            password,\n        });\n    };\n\n    const handleRemovalPromptConfirm = async (): Promise<void> => {\n        const { decrypt } = await import('@/modules/cipher/cipher.service');\n        // only to check if master key is known - not needed to removal operation itself\n        decrypt(\n            data.data.value,\n            masterKeyInputState.value,\n            true\n        ) as PasswordEntityVulnerablePayload;\n\n        await removePassword(data.ref.id);\n        fetchPasswords(masterKeyInputState.value, encryptedAdminKey);\n    };\n\n    const handlePromptConfirm = (): void => {\n        if (promptType === promptTypes.decryption) {\n            handleDecryptionPromptConfirm();\n        } else {\n            handleRemovalPromptConfirm();\n        }\n\n        resetPromptState();\n    };\n\n    const handleControlClick = (nextPromptType: PromptType) => (\n        e: Event\n    ): void => {\n        e.stopPropagation();\n        if (promptType) {\n            return;\n        }\n\n        setPromptType(nextPromptType);\n    };\n\n    const handleFilledEyeClick = (e: Event): void => {\n        e.stopPropagation();\n        resetSelectedAndDecryptedEntity();\n    };\n\n    const renderPrompt = renderIfTrue(() => {\n        const confirmBtnLabel =\n            promptType === promptTypes.decryption\n                ? 'prompt.decrypt'\n                : 'prompt.remove';\n        return (\n            <Prompt\n                renderContent={() => (\n                    <form ref={formRef}>\n                        <FormControlWrapper>\n                            <FormControl\n                                hasError={masterKeyInputProps.hasError}\n                                renderLabel={() => (\n                                    <Text>optionsPanel.enterMasterKey</Text>\n                                )}\n                                renderError={() => (\n                                    <Text>{masterKeyInputState.errors}</Text>\n                                )}\n                                renderInput={() => (\n                                    <TextInput\n                                        type=\"password\"\n                                        placeholder=\"e.g. MyStrongPassword1234\"\n                                        {...masterKeyInputProps}\n                                    />\n                                )}\n                            />\n                        </FormControlWrapper>\n                    </form>\n                )}\n                renderControls={() => (\n                    <Fragment>\n                        <Button onClick={resetPromptState}>\n                            <Text>optionsPanel.cancel</Text>\n                        </Button>\n                        <Button\n                            onClick={handlePromptConfirm}\n                            disabled={!formRef.current?.isValid}\n                        >\n                            <Text>{confirmBtnLabel}</Text>\n                        </Button>\n                    </Fragment>\n                )}\n            />\n        );\n    });\n\n    const renderEyeIcon = () => {\n        if (passwordVisibility) {\n            return (\n                <IconButton\n                    iconName=\"eyeFilled\"\n                    onClick={handleFilledEyeClick}\n                />\n            );\n        }\n        return (\n            <IconButton\n                iconName=\"eye\"\n                onClick={handleControlClick(promptTypes.decryption)}\n            />\n        );\n    };\n\n    const renderControls = renderIfTrue(() => {\n        return (\n            <Fragment>\n                <IconButton\n                    iconName=\"bin\"\n                    onClick={handleControlClick(promptTypes.removal)}\n                />\n                {renderEyeIcon()}\n            </Fragment>\n        );\n    });\n\n    return (\n        <Wrapper onClick={handleClick} isSelected={isSelected}>\n            <GridWrapper>\n                <DataWrapper>\n                    <Row>\n                        <Label>\n                            <Text>passwordEntity.label</Text>\n                        </Label>{' '}\n                        - <Value>{data.data.label}</Value>\n                    </Row>\n                    <Row>\n                        <Label>\n                            <Text>passwordEntity.login</Text>\n                        </Label>{' '}\n                        -{' '}\n                        <Value>\n                            {selectedAndDecryptedEntity.login ??\n                                placeholderEntityValue}\n                        </Value>\n                    </Row>\n                    <Row>\n                        <Label>\n                            <Text>passwordEntity.password</Text>\n                        </Label>{' '}\n                        -{' '}\n                        <Value>\n                            {selectedAndDecryptedEntity.password ??\n                                placeholderEntityValue}\n                        </Value>\n                    </Row>\n                </DataWrapper>\n                <ControlsWrapper>{renderControls(isSelected)}</ControlsWrapper>\n            </GridWrapper>\n            {renderPrompt(Boolean(promptType) && isSelected)}\n        </Wrapper>\n    );\n};\n\ninterface Props {\n    isSelected: boolean;\n    data: PasswordEntityRaw;\n    onClick: Function;\n}\n\nPasswordEntity.propTypes = {\n    isSelected: PropTypes.bool.isRequired,\n    data: PropTypes.any.isRequired,\n    onClick: PropTypes.func.isRequired,\n};\n","import { h, VNode } from 'preact';\nimport { TypedComponent } from '@/common/typings/prop-types';\nimport { useSelector } from '@/store';\nimport {\n    Wrapper,\n    PasswordEntityWrapper,\n    OptionsPanelWrapper,\n    Placeholder,\n    PlaceholderTextWrapper,\n    IconSizer,\n} from './passwordList.styles';\nimport {\n    selectIsClientSet,\n    selectIsFirstTimeOnDevice,\n} from '@/modules/database/database.selectors';\nimport { route } from 'preact-router';\nimport { useEffect, useState } from 'preact/hooks';\nimport { OptionsPanel } from '@/modules/passwordList/components/optionsPanel';\nimport { selectPasswords } from '@/modules/passwordList/passwordList.selectors';\nimport { PasswordEntityRaw } from '@/modules/database/database.service';\nimport { PasswordEntity } from '@/modules/passwordList/components/passwordEntity';\nimport { useAction } from '@preact-hooks/unistore';\nimport { passwordListActions } from '@/modules/passwordList/passwordList.actions';\nimport { optionsPanelVariantNames } from '@/modules/passwordList/passwordList.constants';\nimport { renderIfTrue } from '@/common/utils/rendering';\nimport { Icon } from '@/common/components/icon';\nimport { Text } from '@/modules/localisation/components/text';\n\nexport const useFirstTimeRedirection = (): void => {\n    useEffect(() => {\n        const isFirstTimeOnDevice = useSelector(selectIsFirstTimeOnDevice);\n\n        if (isFirstTimeOnDevice && !(window as any).prerendering) {\n            // User has to be connected to database before accessing /app page\n            setTimeout(() => {\n                route('/settings');\n            });\n        }\n    }, []);\n};\n\nexport const PasswordList: TypedComponent<Props> = () => {\n    useFirstTimeRedirection();\n    const passwords = useSelector(selectPasswords);\n    const isClientSet = useSelector(selectIsClientSet);\n    const shouldRenderPlaceholder =\n        !isClientSet || (isClientSet && !Boolean(passwords.length));\n    const switchOptionsPanelVariant = useAction(\n        passwordListActions.switchOptionPanelVariant\n    );\n    const [\n        selectedEntity,\n        setSelectedEntity,\n    ] = useState<PasswordEntityRaw | null>(null);\n\n    useEffect(() => {\n        if (isClientSet) {\n            switchOptionsPanelVariant(\n                optionsPanelVariantNames.entityFormCollapsed\n            );\n        }\n    }, []);\n\n    const renderPasswords = (): VNode[] => {\n        return passwords.map(\n            (entity: PasswordEntityRaw): VNode => (\n                <PasswordEntityWrapper key={entity.ref.id}>\n                    <PasswordEntity\n                        data={entity}\n                        isSelected={selectedEntity === entity}\n                        onClick={setSelectedEntity}\n                    />\n                </PasswordEntityWrapper>\n            )\n        );\n    };\n\n    const renderPlaceholder = renderIfTrue(\n        (): VNode => {\n            const iconName = isClientSet ? 'database' : 'padlock';\n            const text = isClientSet\n                ? 'passwordList.noDataPlaceholder'\n                : 'passwordList.connectionPlaceholder';\n            return (\n                <Placeholder>\n                    <IconSizer>\n                        <Icon name={iconName} />\n                    </IconSizer>\n                    <PlaceholderTextWrapper>\n                        <Text>{text}</Text>\n                    </PlaceholderTextWrapper>\n                </Placeholder>\n            );\n        }\n    );\n\n    return (\n        <Wrapper>\n            <OptionsPanelWrapper>\n                <OptionsPanel />\n            </OptionsPanelWrapper>\n            {renderPasswords()}\n            {renderPlaceholder(shouldRenderPlaceholder)}\n        </Wrapper>\n    );\n};\n\nexport interface Props {}\n"],"sourceRoot":""}